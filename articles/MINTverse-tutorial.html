<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>MINTverse Tutorial: R Interface for MINTe Malaria Intervention Emulator • rminte</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="MINTverse Tutorial: R Interface for MINTe Malaria Intervention Emulator">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rminte</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rminte-tutorial.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/MINTverse-tutorial.html">MINTverse Tutorial</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/rminte/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>MINTverse Tutorial: R Interface for MINTe Malaria Intervention Emulator</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/rminte/blob/main/vignettes/MINTverse-tutorial.Rmd" class="external-link"><code>vignettes/MINTverse-tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>MINTverse-tutorial.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="mintverse-tutorial">MINTverse Tutorial<a class="anchor" aria-label="anchor" href="#mintverse-tutorial"></a>
</h2>
<blockquote>
<p><strong>Note:</strong> This tutorial is an R adaptation of the
original <a href="https://github.com/CosmoNaught/MINTverse-tutorial/blob/main/MINTverse-tutorial.ipynb" class="external-link">MINTverse
Python tutorial</a>, which demonstrates how the underlying Python
<code>minte</code> package works. The examples and workflow here mirror
that tutorial but use the <strong>rminte</strong> R interface.</p>
</blockquote>
<p>This tutorial demonstrates how to use the <strong>rminte</strong> R
package to run malaria intervention scenarios using the MINTe neural
emulator. This is the R equivalent of the Python <code>minte</code>
package.</p>
<div class="section level3">
<h3 id="common-r-python-equivalents">2. Common R → Python equivalents<a class="anchor" aria-label="anchor" href="#common-r-python-equivalents"></a>
</h3>
<p>Most of what you did in R with MINTer / MINTweb and tidyverse has a
direct analogue in Python + pandas.</p>
<table class="table">
<colgroup>
<col width="15%">
<col width="39%">
<col width="44%">
</colgroup>
<thead><tr class="header">
<th>Task</th>
<th>R / tidyverse</th>
<th>Python / pandas</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Data frame</td>
<td>
<code><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame()</a></code>, <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code>
</td>
<td><code>pd.DataFrame()</code></td>
</tr>
<tr class="even">
<td>Read CSV</td>
<td><code>readr::read_csv("x.csv")</code></td>
<td><code>pd.read_csv("x.csv")</code></td>
</tr>
<tr class="odd">
<td>Filter rows</td>
<td><code>df %&gt;% filter(var == 1)</code></td>
<td><code>df[df["var"] == 1]</code></td>
</tr>
<tr class="even">
<td>Select columns</td>
<td><code>df %&gt;% select(a, b)</code></td>
<td><code>df[["a", "b"]]</code></td>
</tr>
<tr class="odd">
<td>Arrange / sort</td>
<td><code>df %&gt;% arrange(a)</code></td>
<td><code>df.sort_values("a")</code></td>
</tr>
<tr class="even">
<td>Grouped summary</td>
<td><code>df %&gt;% group_by(a) %&gt;% summarise(mean(b))</code></td>
<td><code>df.groupby("a")["b"].mean().reset_index()</code></td>
</tr>
<tr class="odd">
<td>Pipe</td>
<td><code>%&gt;%</code></td>
<td>chain methods: <code>df.query(...).groupby(...).mean()</code>
</td>
</tr>
<tr class="even">
<td>Run scenarios</td>
<td><code>run_minter_scenarios(...)</code></td>
<td><code>run_minter_scenarios(...)</code></td>
</tr>
<tr class="odd">
<td>Missing value (numeric)</td>
<td><code>NA_real_</code></td>
<td>
<code>numpy.nan</code> (imported as <code>np.nan</code>)</td>
</tr>
<tr class="even">
<td>Missing value (string)</td>
<td><code>NA_character_</code></td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p>Conceptually:</p>
<ul>
<li>In R you pass vectors (<code>c(0.3, 0.5, 0.7)</code>);</li>
<li>in Python you pass lists or NumPy arrays
(<code>[0.3, 0.5, 0.7]</code> or <code>np.array([...])</code>).</li>
<li>
<code>run_minter_scenarios</code> is the Python analogue of
<code>run_mintweb_controller</code>: you give it vectors of parameters,
and it runs all scenarios at once.</li>
</ul>
</div>
<div class="section level3">
<h3 id="imports-and-basic-configuration">3. Imports and basic configuration<a class="anchor" aria-label="anchor" href="#imports-and-basic-configuration"></a>
</h3>
<p>Here we import:</p>
<ul>
<li>
<code>dplyr</code> and <code>tidyr</code> for data handling</li>
<li>
<code>run_minter_scenarios</code> – the main controller</li>
<li>
<code>create_scenario_plots_mpl</code> – a built-in matplotlib
plotting helper</li>
<li>
<code>plot_prevalence</code> / <code>plot_cases</code> – native
R/ggplot2 plotting functions</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mrc-ide/rminte" class="external-link">rminte</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="what-run_minter_scenarios-does">4. What <code>run_minter_scenarios</code> does<a class="anchor" aria-label="anchor" href="#what-run_minter_scenarios-does"></a>
</h3>
<p>At a high level, <code>run_minter_scenarios</code>:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Back-calculates EIR</strong> from current prevalence and
interventions using the pre-trained estiMINT XGBoost model.</li>
<li>
<strong>Builds a scenario table</strong> with:
<ul>
<li>baseline EIR</li>
<li>current and future ITN/IRS/LSM</li>
<li>vector behaviour (<code>Q0</code>, <code>phi</code>)</li>
<li>resistance &amp; net quality (<code>dn0_use</code>,
<code>dn0_future</code>)</li>
</ul>
</li>
<li>
<strong>Runs the neural emulator</strong> to predict:
<ul>
<li>under-5 daily prevalence trajectories</li>
<li>all-age daily clinical incidence trajectories per 1000</li>
</ul>
</li>
<li>
<strong>Returns a results object</strong> (similar to an R list)
with:
<ul>
<li>
<code>results$prevalence</code> – Data frame of prevalence over time
for each scenario</li>
<li>
<code>results$cases</code> – Data frame of clinical cases over time
for each scenario</li>
<li>
<code>results$scenario_meta</code> – Per-scenario metadata,
incl. EIR validity</li>
<li>
<code>results$eir_valid</code> – TRUE/FALSE flag</li>
<li>
<code>results$benchmarks</code> – (optional) runtime timings</li>
</ul>
</li>
</ol>
<p>In this tutorial we treat the ML models as a black box: you don’t
have to write or edit any neural-network code to use MINTe.</p>
</div>
<div class="section level3">
<h3 id="a-single-simple-scenario">5. A single simple scenario<a class="anchor" aria-label="anchor" href="#a-single-simple-scenario"></a>
</h3>
<p>Here we run one scenario by passing single values. This is
conceptually the same as a one-row data frame.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: a single scenario</span></span>
<span><span class="va">scenario_tag</span>   <span class="op">&lt;-</span> <span class="st">"example_scenario"</span></span>
<span><span class="va">res_use</span>        <span class="op">&lt;-</span> <span class="fl">0.2</span>       <span class="co"># current resistance</span></span>
<span><span class="va">py_only</span>        <span class="op">&lt;-</span> <span class="fl">0.3</span></span>
<span><span class="va">py_pbo</span>         <span class="op">&lt;-</span> <span class="fl">0.2</span></span>
<span><span class="va">py_pyrrole</span>     <span class="op">&lt;-</span> <span class="fl">0.1</span></span>
<span><span class="va">py_ppf</span>         <span class="op">&lt;-</span> <span class="fl">0.05</span></span>
<span><span class="va">prev</span>           <span class="op">&lt;-</span> <span class="fl">0.55</span>      <span class="co"># current under-5 prevalence at decision time</span></span>
<span><span class="va">Q0</span>             <span class="op">&lt;-</span> <span class="fl">0.92</span>      <span class="co"># proportion of bites indoors</span></span>
<span><span class="va">phi</span>            <span class="op">&lt;-</span> <span class="fl">0.85</span>      <span class="co"># proportion of bites while people are in bed</span></span>
<span><span class="va">season</span>         <span class="op">&lt;-</span> <span class="fl">0</span>         <span class="co"># 0 = perennial, 1 = strongly seasonal</span></span>
<span><span class="va">irs</span>            <span class="op">&lt;-</span> <span class="fl">0.4</span>       <span class="co"># current IRS coverage</span></span>
<span><span class="va">irs_future</span>     <span class="op">&lt;-</span> <span class="fl">0.4</span>       <span class="co"># future IRS coverage</span></span>
<span><span class="va">lsm</span>            <span class="op">&lt;-</span> <span class="fl">0.2</span>       <span class="co"># future LSM coverage</span></span>
<span><span class="va">routine</span>        <span class="op">&lt;-</span> <span class="fl">1</span>         <span class="co"># 1 = routine ITN distribution on, 0 = off</span></span>
<span></span>
<span><span class="co"># Future ITNs: here we scale up py-only nets to 45% coverage</span></span>
<span><span class="va">itn_future</span>      <span class="op">&lt;-</span> <span class="fl">0.45</span></span>
<span><span class="va">net_type_future</span> <span class="op">&lt;-</span> <span class="st">"py_only"</span></span>
<span></span>
<span><span class="va">res_one</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minter_scenarios.html">run_minter_scenarios</a></span><span class="op">(</span></span>
<span>  scenario_tag    <span class="op">=</span> <span class="va">scenario_tag</span>,</span>
<span>  res_use         <span class="op">=</span> <span class="va">res_use</span>,</span>
<span>  py_only         <span class="op">=</span> <span class="va">py_only</span>,</span>
<span>  py_pbo          <span class="op">=</span> <span class="va">py_pbo</span>,</span>
<span>  py_pyrrole      <span class="op">=</span> <span class="va">py_pyrrole</span>,</span>
<span>  py_ppf          <span class="op">=</span> <span class="va">py_ppf</span>,</span>
<span>  prev            <span class="op">=</span> <span class="va">prev</span>,</span>
<span>  Q0              <span class="op">=</span> <span class="va">Q0</span>,</span>
<span>  phi             <span class="op">=</span> <span class="va">phi</span>,</span>
<span>  season          <span class="op">=</span> <span class="va">season</span>,</span>
<span>  irs             <span class="op">=</span> <span class="va">irs</span>,</span>
<span>  itn_future      <span class="op">=</span> <span class="va">itn_future</span>,</span>
<span>  net_type_future <span class="op">=</span> <span class="va">net_type_future</span>,</span>
<span>  irs_future      <span class="op">=</span> <span class="va">irs_future</span>,</span>
<span>  routine         <span class="op">=</span> <span class="va">routine</span>,</span>
<span>  lsm             <span class="op">=</span> <span class="va">lsm</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_one</span></span>
<span><span class="co">#&gt; MINTer Results</span></span>
<span><span class="co">#&gt; ==============</span></span>
<span><span class="co">#&gt; Prevalence predictions: 156 rows</span></span>
<span><span class="co">#&gt; Cases predictions: 156 rows</span></span>
<span><span class="co">#&gt; Scenarios: 1 </span></span>
<span><span class="co">#&gt; EIR valid: TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="what-minte-returns-resprevalence-and-rescases">6. What MINTe returns (<code>res$prevalence</code> and
<code>res$cases</code>)<a class="anchor" aria-label="anchor" href="#what-minte-returns-resprevalence-and-rescases"></a>
</h3>
<p>The result object exposes the main outputs as attributes:</p>
<ul>
<li>
<code>res$prevalence</code> – Data frame with columns like:
<ul>
<li>
<code>index</code> (scenario index)</li>
<li>
<code>timestep</code> (time index, in 14-day steps)</li>
<li>
<code>prevalence</code> (under-5 prevalence)</li>
<li>
<code>model_type</code> (e.g. “LSTM”)</li>
<li>
<code>scenario</code> / <code>scenario_tag</code>
</li>
<li>
<code>eir_valid</code> (whether the EIR is inside the calibrated
range)</li>
</ul>
</li>
<li>
<code>res$cases</code> – Data frame with similar structure, but with
<code>cases</code> instead of <code>prevalence</code>
</li>
</ul>
<p>Let’s look at the first few rows to get a feel for this
structure.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Prevalence (head):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Prevalence (head):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep prevalence model_type         scenario     scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1  0.5459521       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 2     0        2  0.5551386       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 3     0        3  0.5465310       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 4     0        4  0.5329272       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 5     0        5  0.5144109       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 6     0        6  0.4937868       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCases (head):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cases (head):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">cases</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep     cases model_type         scenario     scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1 2.5116408       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 2     0        2 1.5747907       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 3     0        3 0.7914336       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 4     0        4 0.5347684       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 5     0        5 0.4381712       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 6     0        6 0.3793794       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nColumns in prevalence table:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Columns in prevalence table: index timestep prevalence model_type scenario scenario_tag eir_valid</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Columns in cases table:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">cases</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Columns in cases table: index timestep cases model_type scenario scenario_tag eir_valid</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-multiple-scenarios-r-run_mintweb_controller-python">7. Running multiple scenarios (R <code>run_mintweb_controller</code>
→ Python)<a class="anchor" aria-label="anchor" href="#running-multiple-scenarios-r-run_mintweb_controller-python"></a>
</h3>
<p>In R you might have run something like:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">high_prev</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_mintweb_controller.html">run_mintweb_controller</a></span><span class="op">(</span></span>
<span>  scenario_tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no_intervention"</span>, <span class="st">"irs_only"</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>  res_use      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.2</span>, <span class="va">...</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The equivalent is to pass vectors of equal length to
<code>run_minter_scenarios</code>. Each position <code>i</code> defines
one scenario.</p>
<p>Below we reproduce the high-prevalence example.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># High-prevalence example with multiple intervention packages</span></span>
<span><span class="va">scenario_tag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"no_intervention"</span>, <span class="st">"irs_only"</span>, <span class="st">"lsm_only"</span>, <span class="st">"py_only_only"</span>,</span>
<span>  <span class="st">"py_only_with_lsm"</span>, <span class="st">"py_pbo_only"</span>, <span class="st">"py_pbo_with_lsm"</span>, <span class="st">"py_pyrrole_only"</span>,</span>
<span>  <span class="st">"py_pyrrole_with_lsm"</span>, <span class="st">"py_ppf_only"</span>, <span class="st">"py_ppf_with_lsm"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">scenario_tag</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_use</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">py_only</span>    <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">py_pbo</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">py_pyrrole</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">py_ppf</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">prev</span>       <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.55</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">Q0</span>         <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.92</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">phi</span>        <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">season</span>     <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">irs</span>        <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="va">itn_future</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">0.00</span>, <span class="fl">0.00</span>, <span class="fl">0.00</span>,   <span class="co"># no nets for the first three scenarios</span></span>
<span>  <span class="fl">0.45</span>, <span class="fl">0.45</span>,         <span class="co"># py_only w/wo LSM</span></span>
<span>  <span class="fl">0.45</span>, <span class="fl">0.45</span>,         <span class="co"># py_pbo w/wo LSM</span></span>
<span>  <span class="fl">0.45</span>, <span class="fl">0.45</span>,         <span class="co"># py_pyrrole w/wo LSM</span></span>
<span>  <span class="fl">0.45</span>, <span class="fl">0.45</span>          <span class="co"># py_ppf w/wo LSM</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">net_type_future</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>,</span>
<span>  <span class="st">"py_only"</span>, <span class="st">"py_only"</span>,</span>
<span>  <span class="st">"py_pbo"</span>, <span class="st">"py_pbo"</span>,</span>
<span>  <span class="st">"py_pyrrole"</span>, <span class="st">"py_pyrrole"</span>,</span>
<span>  <span class="st">"py_ppf"</span>, <span class="st">"py_ppf"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">irs_future</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.5</span>, <span class="fl">0.0</span>,      <span class="co"># second scenario increases IRS</span></span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.0</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.0</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.0</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">routine</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>,            <span class="co"># first three: no routine distribution</span></span>
<span>  <span class="fl">1</span>, <span class="fl">1</span>,</span>
<span>  <span class="fl">1</span>, <span class="fl">1</span>,</span>
<span>  <span class="fl">1</span>, <span class="fl">1</span>,</span>
<span>  <span class="fl">1</span>, <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.0</span>, <span class="fl">0.2</span>,      <span class="co"># third scenario: LSM only</span></span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.2</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.2</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.2</span>,</span>
<span>  <span class="fl">0.0</span>, <span class="fl">0.2</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minter_scenarios.html">run_minter_scenarios</a></span><span class="op">(</span></span>
<span>  scenario_tag    <span class="op">=</span> <span class="va">scenario_tag</span>,</span>
<span>  res_use         <span class="op">=</span> <span class="va">res_use</span>,</span>
<span>  py_only         <span class="op">=</span> <span class="va">py_only</span>,</span>
<span>  py_pbo          <span class="op">=</span> <span class="va">py_pbo</span>,</span>
<span>  py_pyrrole      <span class="op">=</span> <span class="va">py_pyrrole</span>,</span>
<span>  py_ppf          <span class="op">=</span> <span class="va">py_ppf</span>,</span>
<span>  prev            <span class="op">=</span> <span class="va">prev</span>,</span>
<span>  Q0              <span class="op">=</span> <span class="va">Q0</span>,</span>
<span>  phi             <span class="op">=</span> <span class="va">phi</span>,</span>
<span>  season          <span class="op">=</span> <span class="va">season</span>,</span>
<span>  irs             <span class="op">=</span> <span class="va">irs</span>,</span>
<span>  itn_future      <span class="op">=</span> <span class="va">itn_future</span>,</span>
<span>  net_type_future <span class="op">=</span> <span class="va">net_type_future</span>,</span>
<span>  irs_future      <span class="op">=</span> <span class="va">irs_future</span>,</span>
<span>  routine         <span class="op">=</span> <span class="va">routine</span>,</span>
<span>  lsm             <span class="op">=</span> <span class="va">lsm</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Prevalence shape:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span>, <span class="st">"x"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Prevalence shape: 1716 x 7</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Cases shape:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">cases</span><span class="op">)</span>, <span class="st">"x"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">cases</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Cases shape: 1716 x 7</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep prevalence model_type        scenario    scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1  0.5459521       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 2     0        2  0.5551386       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 3     0        3  0.5465310       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 4     0        4  0.5329272       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 5     0        5  0.5144110       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 6     0        6  0.4937868       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploring-results-in-data-form">8. Exploring results in data form<a class="anchor" aria-label="anchor" href="#exploring-results-in-data-form"></a>
</h3>
<p>Typical tasks a malaria researcher might want:</p>
<ul>
<li>Look at the first few rows: <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code>
</li>
<li>Filter to a specific scenario or time window</li>
<li>Summarise average prevalence / incidence over a period</li>
<li>Compare scenarios side-by-side</li>
</ul>
<p>We do this with dplyr, which plays the same role as pandas in
Python.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prev_df</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">prevalence</span></span>
<span><span class="va">cases_df</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">cases</span></span>
<span></span>
<span><span class="co"># First few rows of each</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Prevalence:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Prevalence:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">prev_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep prevalence model_type        scenario    scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1  0.5459521       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 2     0        2  0.5551386       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 3     0        3  0.5465310       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 4     0        4  0.5329272       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 5     0        5  0.5144110       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt; 6     0        6  0.4937868       LSTM no_intervention no_intervention</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCases:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cases:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">cases_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep     cases model_type        scenario    scenario_tag eir_valid</span></span>
<span><span class="co">#&gt; 1     0        1 2.5116408       LSTM no_intervention no_intervention      TRUE</span></span>
<span><span class="co">#&gt; 2     0        2 1.5747905       LSTM no_intervention no_intervention      TRUE</span></span>
<span><span class="co">#&gt; 3     0        3 0.7914336       LSTM no_intervention no_intervention      TRUE</span></span>
<span><span class="co">#&gt; 4     0        4 0.5347682       LSTM no_intervention no_intervention      TRUE</span></span>
<span><span class="co">#&gt; 5     0        5 0.4381717       LSTM no_intervention no_intervention      TRUE</span></span>
<span><span class="co">#&gt; 6     0        6 0.3793796       LSTM no_intervention no_intervention      TRUE</span></span>
<span></span>
<span><span class="co"># Unique scenarios</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nScenarios:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">prev_df</span><span class="op">$</span><span class="va">scenario</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Scenarios: no_intervention irs_only lsm_only py_only_only py_only_with_lsm py_pbo_only py_pbo_with_lsm py_pyrrole_only py_pyrrole_with_lsm py_ppf_only py_ppf_with_lsm</span></span>
<span></span>
<span><span class="co"># Example: subset to a single scenario</span></span>
<span><span class="va">subset_df</span> <span class="op">&lt;-</span> <span class="va">prev_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scenario</span> <span class="op">==</span> <span class="st">"py_pbo_with_lsm"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">subset_df</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep prevalence model_type        scenario    scenario_tag</span></span>
<span><span class="co">#&gt; 1     6        1  0.5459521       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt; 2     6        2  0.5551386       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt; 3     6        3  0.5465310       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt; 4     6        4  0.5329272       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt; 5     6        5  0.5144110       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt; 6     6        6  0.4937868       LSTM py_pbo_with_lsm py_pbo_with_lsm</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span>
<span></span>
<span><span class="co"># Example: summary over the whole time horizon</span></span>
<span><span class="va">mean_prev_by_scenario</span> <span class="op">&lt;-</span> <span class="va">prev_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>prevalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">prevalence</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">prevalence</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMean prevalence over all timesteps by scenario:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mean prevalence over all timesteps by scenario:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mean_prev_by_scenario</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 2</span></span></span>
<span><span class="co">#&gt;    scenario            prevalence</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> no_intervention          0.664</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> py_only_only             0.653</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> lsm_only                 0.652</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> py_ppf_only              0.646</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> py_only_with_lsm         0.639</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> py_pbo_only              0.639</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> py_pyrrole_only          0.634</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> py_ppf_with_lsm          0.632</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> py_pbo_with_lsm          0.623</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> py_pyrrole_with_lsm      0.618</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> irs_only                 0.523</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-the-built-in-plotting-helper-create_scenario_plots_mpl">9. Using the built-in plotting helper:
<code>create_scenario_plots_mpl</code><a class="anchor" aria-label="anchor" href="#using-the-built-in-plotting-helper-create_scenario_plots_mpl"></a>
</h3>
<p>MINTe provides a convenience function
<code>create_scenario_plots_mpl</code> that wraps the Python matplotlib
plotting functionality:</p>
<ul>
<li>Takes the <code>res$prevalence</code> (and/or
<code>res$cases</code>) table</li>
<li>Automatically generates per-scenario plots of prevalence and/or
cases over time</li>
<li>Saves them as image files (e.g. <code>.png</code>) in a chosen
folder</li>
</ul>
<p>This is the quickest way to get a full set of figures for a gallery
of scenarios.</p>
<p><strong>Note:</strong> For native R plotting with ggplot2, you can
also use <code><a href="../reference/plot_prevalence.html">plot_prevalence()</a></code> or <code><a href="../reference/plot_cases.html">plot_cases()</a></code>
which provide the same functionality but return ggplot2 objects that
integrate better with R workflows.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a folder for plots (if it doesn't exist)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">"plots"</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use the built-in matplotlib plotting helper</span></span>
<span><span class="va">plots</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_scenario_plots_mpl.html">create_scenario_plots_mpl</a></span><span class="op">(</span></span>
<span>  <span class="va">res</span><span class="op">$</span><span class="va">prevalence</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="st">"plots/"</span>,</span>
<span>  plot_type <span class="op">=</span> <span class="st">"both"</span>   <span class="co"># "individual", "combined", or "both"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Created plots:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">plots</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<p>The plots have been saved to the <code>plots/</code> folder. Here is
the combined plot:</p>
<p><img src="plots/prevalence_all_scenarios_combined.png" class="r-plt" width="100%"></p>
</div>
<div class="section level3">
<h3 id="optional-custom-inline-plot">10. Optional: custom inline plot<a class="anchor" aria-label="anchor" href="#optional-custom-inline-plot"></a>
</h3>
<p>For more control, you can create custom plots using ggplot2. Here we
convert timesteps to years and plot a subset of key scenarios:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a copy and add a 'year' column (timestep * 14 days → years)</span></span>
<span><span class="va">prev_df_years</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">prevalence</span></span>
<span><span class="va">prev_df_years</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="va">prev_df_years</span><span class="op">$</span><span class="va">timestep</span> <span class="op">*</span> <span class="fl">14</span> <span class="op">/</span> <span class="fl">365.0</span></span>
<span></span>
<span><span class="co"># Example: plot prevalence trajectories for a few key scenarios inline</span></span>
<span><span class="va">key_scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no_intervention"</span>, <span class="st">"py_pbo_with_lsm"</span>, <span class="st">"py_ppf_with_lsm"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">prev_df_years</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scenario</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">key_scenarios</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">prevalence</span>, color <span class="op">=</span> <span class="va">scenario</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"MINTe prevalence trajectories (selected scenarios)"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"time (years)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"under-5 prevalence"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Scenario"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span></span></code></pre></div>
<p><img src="MINTverse-tutorial_files/figure-html/custom-plots-1.png" class="r-plt" width="960"></p>
</div>
<div class="section level3">
<h3 id="summary-statistics">11. Summary statistics<a class="anchor" aria-label="anchor" href="#summary-statistics"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mean prevalence by scenario (sorted)</span></span>
<span><span class="va">mean_prev</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">prevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>prevalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">prevalence</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">prevalence</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Mean prevalence over all timesteps by scenario:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Mean prevalence over all timesteps by scenario:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mean_prev</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 2</span></span></span>
<span><span class="co">#&gt;    scenario            prevalence</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> no_intervention          0.664</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> py_only_only             0.653</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> lsm_only                 0.652</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> py_ppf_only              0.646</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> py_only_with_lsm         0.639</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> py_pbo_only              0.639</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> py_pyrrole_only          0.634</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> py_ppf_with_lsm          0.632</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> py_pbo_with_lsm          0.623</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> py_pyrrole_with_lsm      0.618</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> irs_only                 0.523</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exporting-results-to-csv">12. Exporting results to CSV<a class="anchor" aria-label="anchor" href="#exporting-results-to-csv"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export prevalence results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">prevalence</span>, <span class="st">"prevalence_results.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export cases results  </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">cases</span>, <span class="st">"cases_results.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Export summary statistics</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">mean_prev</span>, <span class="st">"mean_prevalence_summary.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.5.2 (2025-10-31)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] ggplot2_4.0.1 tidyr_1.3.1   dplyr_1.1.4   rminte_0.1.0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] Matrix_1.7-4       gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.2    </span></span>
<span><span class="co">#&gt;  [5] tidyselect_1.2.1   Rcpp_1.1.0         jquerylib_0.1.4    scales_1.4.0      </span></span>
<span><span class="co">#&gt;  [9] systemfonts_1.3.1  textshaping_1.0.4  png_0.1-8          yaml_2.3.11       </span></span>
<span><span class="co">#&gt; [13] fastmap_1.2.0      here_1.0.2         reticulate_1.44.1  lattice_0.22-7    </span></span>
<span><span class="co">#&gt; [17] R6_2.6.1           labeling_0.4.3     generics_0.1.4     knitr_1.50        </span></span>
<span><span class="co">#&gt; [21] tibble_3.3.0       desc_1.4.3         rprojroot_2.1.1    RColorBrewer_1.1-3</span></span>
<span><span class="co">#&gt; [25] bslib_0.9.0        pillar_1.11.1      rlang_1.1.6        utf8_1.2.6        </span></span>
<span><span class="co">#&gt; [29] cachem_1.1.0       xfun_0.54          S7_0.2.1           fs_1.6.6          </span></span>
<span><span class="co">#&gt; [33] sass_0.4.10        cli_3.6.5          withr_3.0.2        pkgdown_2.2.0     </span></span>
<span><span class="co">#&gt; [37] magrittr_2.0.4     digest_0.6.39      grid_4.5.2         rappdirs_0.3.3    </span></span>
<span><span class="co">#&gt; [41] lifecycle_1.0.4    vctrs_0.6.5        evaluate_1.0.5     glue_1.8.0        </span></span>
<span><span class="co">#&gt; [45] farver_2.1.2       ragg_1.5.0         rmarkdown_2.30     purrr_1.2.0       </span></span>
<span><span class="co">#&gt; [49] tools_4.5.2        pkgconfig_2.0.3    htmltools_0.5.9</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by OJ Watson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
