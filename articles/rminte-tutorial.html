<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with rminte: R interface for MINTe malaria intervention emulator • rminte</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Working with rminte: R interface for MINTe malaria intervention emulator">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rminte</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/rminte-tutorial.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/MINTverse-tutorial.html">MINTverse Tutorial</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrc-ide/rminte/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Working with rminte: R interface for MINTe malaria intervention emulator</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrc-ide/rminte/blob/main/vignettes/rminte-tutorial.Rmd" class="external-link"><code>vignettes/rminte-tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>rminte-tutorial.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="working-with-rminte-r-interface-for-minte-malaria-intervention-emulator">Working with rminte: R interface for MINTe malaria intervention
emulator<a class="anchor" aria-label="anchor" href="#working-with-rminte-r-interface-for-minte-malaria-intervention-emulator"></a>
</h2>
<p>This vignette walks through how to:</p>
<ol style="list-style-type: decimal">
<li>Install and load the rminte package</li>
<li>Run <strong>single</strong> and <strong>multiple</strong> scenarios
with <code><a href="../reference/run_minter_scenarios.html">run_minter_scenarios()</a></code>
</li>
<li>Understand the <strong>outputs</strong> (prevalence, cases, scenario
metadata)</li>
<li>Explore results using tidyverse tools</li>
<li>Visualize results with ggplot2</li>
<li>Export results to CSV for further analysis</li>
</ol>
<p>We treat the ML models as a <strong>black box surrogate</strong> for
<code>malariasimulation</code>:</p>
<ul>
<li>You provide: baseline setting + intervention package(s)</li>
<li>MINTe returns: predicted prevalence and clinical cases over
time</li>
</ul>
<div class="section level3">
<h3 id="installation-and-setup">1. Installation and Setup<a class="anchor" aria-label="anchor" href="#installation-and-setup"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install rminte (if not already installed)</span></span>
<span><span class="co"># devtools::install_local("path/to/rminte")</span></span>
<span></span>
<span><span class="co"># The Python minte package will be automatically installed via reticulate</span></span>
<span><span class="co"># when you first use the package (via py_require)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mrc-ide/rminte" class="external-link">rminte</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if minte is available</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"minte available:"</span>, <span class="fu"><a href="../reference/minte_available.html">minte_available</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; minte available: TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="what-run_minter_scenarios-does">2. What <code>run_minter_scenarios()</code> does<a class="anchor" aria-label="anchor" href="#what-run_minter_scenarios-does"></a>
</h3>
<p>At a high level, <code><a href="../reference/run_minter_scenarios.html">run_minter_scenarios()</a></code>:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Back-calculates EIR</strong> from current prevalence and
interventions using the pre-trained <strong>estiMINT XGBoost</strong>
model</li>
<li>Builds a <strong>scenario table</strong> with baseline EIR, current
and future ITN/IRS/LSM, vector behaviour, resistance &amp; net
quality</li>
<li>Runs the <strong>neural emulator</strong> to predict:
<ul>
<li>Under-5 daily prevalence trajectories</li>
<li>All-age daily clinical incidence trajectories per 1000</li>
</ul>
</li>
<li>Returns a results object with:
<ul>
<li>
<code>prevalence</code> - Data frame of prevalence over time for
each scenario</li>
<li>
<code>cases</code> - Data frame of clinical cases over time for each
scenario</li>
<li>
<code>scenario_meta</code> - Per-scenario metadata including EIR
validity</li>
<li>
<code>eir_valid</code> - TRUE/FALSE flag</li>
<li>
<code>benchmarks</code> - Runtime timings (optional)</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="a-single-simple-scenario">3. A Single Simple Scenario<a class="anchor" aria-label="anchor" href="#a-single-simple-scenario"></a>
</h3>
<p>Here we run <strong>one</strong> scenario by passing single values
(or length-1 vectors).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: a single scenario</span></span>
<span><span class="va">res_one</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minter_scenarios.html">run_minter_scenarios</a></span><span class="op">(</span></span>
<span> scenario_tag <span class="op">=</span> <span class="st">"example_scenario"</span>,</span>
<span> res_use <span class="op">=</span> <span class="fl">0.2</span>,        <span class="co"># current resistance</span></span>
<span> py_only <span class="op">=</span> <span class="fl">0.3</span>,        <span class="co"># pyrethroid-only net coverage</span></span>
<span> py_pbo <span class="op">=</span> <span class="fl">0.2</span>,         <span class="co"># PBO net coverage</span></span>
<span> py_pyrrole <span class="op">=</span> <span class="fl">0.1</span>,     <span class="co"># pyrrole net coverage</span></span>
<span> py_ppf <span class="op">=</span> <span class="fl">0.05</span>,        <span class="co"># PPF net coverage</span></span>
<span> prev <span class="op">=</span> <span class="fl">0.55</span>,          <span class="co"># current under-5 prevalence at decision time</span></span>
<span> Q0 <span class="op">=</span> <span class="fl">0.92</span>,            <span class="co"># proportion of bites indoors</span></span>
<span> phi <span class="op">=</span> <span class="fl">0.85</span>,           <span class="co"># proportion of bites while people are in bed</span></span>
<span> season <span class="op">=</span> <span class="fl">0</span>,           <span class="co"># 0 = perennial, 1 = strongly seasonal</span></span>
<span> irs <span class="op">=</span> <span class="fl">0.4</span>,            <span class="co"># current IRS coverage</span></span>
<span> irs_future <span class="op">=</span> <span class="fl">0.4</span>,     <span class="co"># future IRS coverage</span></span>
<span> lsm <span class="op">=</span> <span class="fl">0.2</span>,            <span class="co"># future LSM coverage</span></span>
<span> routine <span class="op">=</span> <span class="fl">1</span>,          <span class="co"># 1 = routine ITN distribution on</span></span>
<span> itn_future <span class="op">=</span> <span class="fl">0.45</span>,    <span class="co"># future ITN coverage</span></span>
<span> net_type_future <span class="op">=</span> <span class="st">"py_only"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">)</span></span>
<span><span class="co">#&gt; MINTer Results</span></span>
<span><span class="co">#&gt; ==============</span></span>
<span><span class="co">#&gt; Prevalence predictions: 156 rows</span></span>
<span><span class="co">#&gt; Cases predictions: 156 rows</span></span>
<span><span class="co">#&gt; Scenarios: 1 </span></span>
<span><span class="co">#&gt; EIR valid: TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="understanding-the-output-structure">4. Understanding the Output Structure<a class="anchor" aria-label="anchor" href="#understanding-the-output-structure"></a>
</h3>
<p>The result object exposes the main outputs as list elements:</p>
<ul>
<li>
<code>res_one$prevalence</code> - Data frame with prevalence over
time</li>
<li>
<code>res_one$cases</code> - Data frame with clinical cases over
time</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View first few rows of prevalence</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Prevalence (head):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Prevalence (head):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">prevalence</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep prevalence model_type         scenario     scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1  0.5459521       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 2     0        2  0.5551386       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 3     0        3  0.5465310       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 4     0        4  0.5329272       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 5     0        5  0.5144109       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 6     0        6  0.4937868       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View first few rows of cases</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCases (head):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Cases (head):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">cases</span><span class="op">)</span></span>
<span><span class="co">#&gt;   index timestep     cases model_type         scenario     scenario_tag</span></span>
<span><span class="co">#&gt; 1     0        1 2.5116408       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 2     0        2 1.5747907       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 3     0        3 0.7914336       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 4     0        4 0.5347684       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 5     0        5 0.4381712       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt; 6     0        6 0.3793794       LSTM example_scenario example_scenario</span></span>
<span><span class="co">#&gt;   eir_valid</span></span>
<span><span class="co">#&gt; 1      TRUE</span></span>
<span><span class="co">#&gt; 2      TRUE</span></span>
<span><span class="co">#&gt; 3      TRUE</span></span>
<span><span class="co">#&gt; 4      TRUE</span></span>
<span><span class="co">#&gt; 5      TRUE</span></span>
<span><span class="co">#&gt; 6      TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># View scenario metadata</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nScenario metadata:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Scenario metadata:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res_one</span><span class="op">$</span><span class="va">scenario_meta</span><span class="op">)</span></span>
<span><span class="co">#&gt;       scenario_tag eir_valid</span></span>
<span><span class="co">#&gt; 1 example_scenario      TRUE</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nEIR valid:"</span>, <span class="va">res_one</span><span class="op">$</span><span class="va">eir_valid</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; EIR valid: TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="running-multiple-scenarios">5. Running Multiple Scenarios<a class="anchor" aria-label="anchor" href="#running-multiple-scenarios"></a>
</h3>
<p>Now let’s compare several intervention strategies. We’ll create
scenarios for:</p>
<ul>
<li>No intervention (baseline)</li>
<li>IRS only</li>
<li>LSM only</li>
<li>Different net types (py_only, py_pbo, py_pyrrole, py_ppf)</li>
<li>Combinations with LSM</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define multiple scenarios</span></span>
<span><span class="va">scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"no_intervention"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.3</span>, py_pbo <span class="op">=</span> <span class="fl">0.2</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.1</span>, py_ppf <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"irs_only"</span>, irs <span class="op">=</span> <span class="fl">0.5</span>, irs_future <span class="op">=</span> <span class="fl">0.5</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.3</span>, py_pbo <span class="op">=</span> <span class="fl">0.2</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.1</span>, py_ppf <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"lsm_only"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.3</span>, py_pbo <span class="op">=</span> <span class="fl">0.2</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.1</span>, py_ppf <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_only_only"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.5</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_only_with_lsm"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.5</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_pbo_only"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.5</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_pbo_with_lsm"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.5</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_ppf_only"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_ppf_with_lsm"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.0</span>, py_ppf <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_pyrrole_only"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.0</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.5</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span>,</span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"py_pyrrole_with_lsm"</span>, irs <span class="op">=</span> <span class="fl">0.0</span>, irs_future <span class="op">=</span> <span class="fl">0.0</span>, lsm <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>      py_only <span class="op">=</span> <span class="fl">0.0</span>, py_pbo <span class="op">=</span> <span class="fl">0.0</span>, py_pyrrole <span class="op">=</span> <span class="fl">0.5</span>, py_ppf <span class="op">=</span> <span class="fl">0.0</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">scenarios</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract vectors for each parameter</span></span>
<span><span class="va">res_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_minter_scenarios.html">run_minter_scenarios</a></span><span class="op">(</span></span>
<span> scenario_tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"tag"</span><span class="op">)</span>,</span>
<span> res_use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> py_only <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"py_only"</span><span class="op">)</span>,</span>
<span> py_pbo <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"py_pbo"</span><span class="op">)</span>,</span>
<span> py_pyrrole <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"py_pyrrole"</span><span class="op">)</span>,</span>
<span> py_ppf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"py_ppf"</span><span class="op">)</span>,</span>
<span> prev <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.55</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> Q0 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.92</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> phi <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> season <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> irs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"irs"</span><span class="op">)</span>,</span>
<span> irs_future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"irs_future"</span><span class="op">)</span>,</span>
<span> lsm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">scenarios</span>, <span class="va">`[[`</span>, <span class="st">"lsm"</span><span class="op">)</span>,</span>
<span> routine <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">n</span><span class="op">)</span>,</span>
<span> benchmark <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Benchmark Results ===</span></span>
<span><span class="co">#&gt; Pre-load models to cache: 0.000 seconds</span></span>
<span><span class="co">#&gt; Run EIR predictions (11 scenarios): 0.054 seconds</span></span>
<span><span class="co">#&gt; Run Prevalence NN (11 scenarios): 0.043 seconds</span></span>
<span><span class="co">#&gt; Run Cases NN (11 scenarios): 0.062 seconds</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Total time: 0.160 seconds</span></span>
<span><span class="co">#&gt; ==============================</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">)</span></span>
<span><span class="co">#&gt; MINTer Results</span></span>
<span><span class="co">#&gt; ==============</span></span>
<span><span class="co">#&gt; Prevalence predictions: 1716 rows</span></span>
<span><span class="co">#&gt; Cases predictions: 1716 rows</span></span>
<span><span class="co">#&gt; Scenarios: 11 </span></span>
<span><span class="co">#&gt; EIR valid: TRUE </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Benchmarks:</span></span>
<span><span class="co">#&gt;    preload_models : 2.622604e-06 </span></span>
<span><span class="co">#&gt;    run_eir_models : 0.0540297 </span></span>
<span><span class="co">#&gt;    run_neural_network_prevalence : 0.04264092 </span></span>
<span><span class="co">#&gt;    run_neural_network_cases : 0.06245422 </span></span>
<span><span class="co">#&gt;    total : 0.1598759 </span></span>
<span><span class="co">#&gt;    total_scenarios : 11</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exploring-results-with-dplyr">6. Exploring Results with dplyr<a class="anchor" aria-label="anchor" href="#exploring-results-with-dplyr"></a>
</h3>
<p>Let’s use tidyverse tools to analyze the results.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First few rows by scenario</span></span>
<span><span class="va">res_multi</span><span class="op">$</span><span class="va">prevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario_tag</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 33 × 7</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># Groups:   scenario_tag [11]</span></span></span>
<span><span class="co">#&gt;    index timestep prevalence model_type scenario         scenario_tag  eir_valid</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     1        1      0.516 LSTM       irs_only         irs_only      FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     1        2      0.522 LSTM       irs_only         irs_only      FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     1        3      0.511 LSTM       irs_only         irs_only      FALSE    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     2        1      0.459 LSTM       lsm_only         lsm_only      TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     2        2      0.499 LSTM       lsm_only         lsm_only      TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2        3      0.499 LSTM       lsm_only         lsm_only      TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     0        1      0.459 LSTM       no_intervention  no_intervent… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     0        2      0.499 LSTM       no_intervention  no_intervent… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     0        3      0.499 LSTM       no_intervention  no_intervent… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     3        1      0.486 LSTM       py_only_only     py_only_only  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span>     3        2      0.540 LSTM       py_only_only     py_only_only  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span>     3        3      0.541 LSTM       py_only_only     py_only_only  TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span>     4        1      0.486 LSTM       py_only_with_lsm py_only_with… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span>     4        2      0.540 LSTM       py_only_with_lsm py_only_with… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span>     4        3      0.541 LSTM       py_only_with_lsm py_only_with… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span>     5        1      0.475 LSTM       py_pbo_only      py_pbo_only   TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span>     5        2      0.518 LSTM       py_pbo_only      py_pbo_only   TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span>     5        3      0.520 LSTM       py_pbo_only      py_pbo_only   TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span>     6        1      0.475 LSTM       py_pbo_with_lsm  py_pbo_with_… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">20</span>     6        2      0.518 LSTM       py_pbo_with_lsm  py_pbo_with_… TRUE     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 13 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mean prevalence over all timesteps by scenario</span></span>
<span><span class="va">mean_prev</span> <span class="op">&lt;-</span> <span class="va">res_multi</span><span class="op">$</span><span class="va">prevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario_tag</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_prevalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">prevalence</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">mean_prevalence</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMean prevalence by scenario (sorted):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mean prevalence by scenario (sorted):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mean_prev</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 2</span></span></span>
<span><span class="co">#&gt;    scenario_tag        mean_prevalence</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> irs_only                      0.456</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> lsm_only                      0.481</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> py_ppf_with_lsm               0.494</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> py_pbo_with_lsm               0.505</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> py_pyrrole_with_lsm           0.509</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> no_intervention               0.511</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> py_only_with_lsm              0.522</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> py_ppf_only                   0.529</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> py_pbo_only                   0.534</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> py_pyrrole_only               0.537</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> py_only_only                  0.553</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mean cases by scenario</span></span>
<span><span class="va">mean_cases</span> <span class="op">&lt;-</span> <span class="va">res_multi</span><span class="op">$</span><span class="va">cases</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario_tag</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cases</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">mean_cases</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nMean cases by scenario (sorted):\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Mean cases by scenario (sorted):</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mean_cases</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 2</span></span></span>
<span><span class="co">#&gt;    scenario_tag        mean_cases</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> irs_only                  1.52</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> py_ppf_with_lsm           1.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> lsm_only                  1.73</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> py_pbo_with_lsm           1.77</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> py_pyrrole_with_lsm       1.77</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> py_only_with_lsm          1.79</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> py_ppf_only               1.90</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> no_intervention           1.92</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> py_pyrrole_only           1.95</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> py_pbo_only               1.95</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> py_only_only              1.98</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualization-with-ggplot2">7. Visualization with ggplot2<a class="anchor" aria-label="anchor" href="#visualization-with-ggplot2"></a>
</h3>
<div class="section level4">
<h4 id="prevalence-over-time-all-scenarios">Prevalence Over Time (All Scenarios)<a class="anchor" aria-label="anchor" href="#prevalence-over-time-all-scenarios"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">$</span><span class="va">prevalence</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">timestep</span>, y <span class="op">=</span> <span class="va">prevalence</span>, </span>
<span>                                  color <span class="op">=</span> <span class="va">scenario_tag</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.8</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>   title <span class="op">=</span> <span class="st">"Malaria Prevalence Over Time by Intervention Strategy"</span>,</span>
<span>   subtitle <span class="op">=</span> <span class="st">"Under-5 prevalence predicted by MINTe neural emulator"</span>,</span>
<span>   x <span class="op">=</span> <span class="st">"Timestep (14-day periods)"</span>,</span>
<span>   y <span class="op">=</span> <span class="st">"Prevalence"</span>,</span>
<span>   color <span class="op">=</span> <span class="st">"Scenario"</span></span>
<span> <span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/plot-prevalence-all-1.png" class="r-plt" width="960"></p>
</div>
<div class="section level4">
<h4 id="cases-over-time-all-scenarios">Cases Over Time (All Scenarios)<a class="anchor" aria-label="anchor" href="#cases-over-time-all-scenarios"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">$</span><span class="va">cases</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">timestep</span>, y <span class="op">=</span> <span class="va">cases</span>, </span>
<span>                             color <span class="op">=</span> <span class="va">scenario_tag</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.8</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>   title <span class="op">=</span> <span class="st">"Clinical Cases Over Time by Intervention Strategy"</span>,</span>
<span>   subtitle <span class="op">=</span> <span class="st">"Cases per 1000 predicted by MINTe neural emulator"</span>,</span>
<span>   x <span class="op">=</span> <span class="st">"Timestep (14-day periods)"</span>,</span>
<span>   y <span class="op">=</span> <span class="st">"Clinical Cases (per 1000)"</span>,</span>
<span>   color <span class="op">=</span> <span class="st">"Scenario"</span></span>
<span> <span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/plot-cases-all-1.png" class="r-plt" width="960"></p>
</div>
<div class="section level4">
<h4 id="comparing-selected-scenarios">Comparing Selected Scenarios<a class="anchor" aria-label="anchor" href="#comparing-selected-scenarios"></a>
</h4>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Compare key scenarios</span></span>
<span><span class="va">selected</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"no_intervention"</span>, <span class="st">"irs_only"</span>, <span class="st">"py_pbo_only"</span>, <span class="st">"py_pyrrole_with_lsm"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_multi</span><span class="op">$</span><span class="va">prevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scenario_tag</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">selected</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">timestep</span>, y <span class="op">=</span> <span class="va">prevalence</span>, color <span class="op">=</span> <span class="va">scenario_tag</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>   title <span class="op">=</span> <span class="st">"Comparing Key Intervention Strategies"</span>,</span>
<span>   x <span class="op">=</span> <span class="st">"Timestep (14-day periods)"</span>,</span>
<span>   y <span class="op">=</span> <span class="st">"Prevalence"</span>,</span>
<span>   color <span class="op">=</span> <span class="st">"Scenario"</span></span>
<span> <span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_color_brewer</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Set1"</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/plot-selected-1.png" class="r-plt" width="960"></p>
</div>
<div class="section level4">
<h4 id="bar-chart-of-mean-prevalence">Bar Chart of Mean Prevalence<a class="anchor" aria-label="anchor" href="#bar-chart-of-mean-prevalence"></a>
</h4>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mean_prev</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>scenario_tag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">scenario_tag</span>, <span class="va">mean_prevalence</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">scenario_tag</span>, y <span class="op">=</span> <span class="va">mean_prevalence</span>, fill <span class="op">=</span> <span class="va">scenario_tag</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>   title <span class="op">=</span> <span class="st">"Mean Prevalence by Intervention Strategy"</span>,</span>
<span>   x <span class="op">=</span> <span class="st">"Scenario"</span>,</span>
<span>   y <span class="op">=</span> <span class="st">"Mean Prevalence"</span></span>
<span> <span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/plot-bar-1.png" class="r-plt" width="960"></p>
</div>
</div>
<div class="section level3">
<h3 id="using-built-in-plotting-functions">8. Using Built-in Plotting Functions<a class="anchor" aria-label="anchor" href="#using-built-in-plotting-functions"></a>
</h3>
<p>rminte also provides convenience plotting functions:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using the built-in plot_prevalence function</span></span>
<span><span class="fu"><a href="../reference/plot_prevalence.html">plot_prevalence</a></span><span class="op">(</span><span class="va">res_multi</span>, title <span class="op">=</span> <span class="st">"Prevalence Trajectories"</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/builtin-plot-1.png" class="r-plt" width="960"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using the built-in plot_cases function</span></span>
<span><span class="fu"><a href="../reference/plot_cases.html">plot_cases</a></span><span class="op">(</span><span class="va">res_multi</span>, title <span class="op">=</span> <span class="st">"Cases Trajectories"</span><span class="op">)</span></span></code></pre></div>
<p><img src="rminte-tutorial_files/figure-html/builtin-plot-cases-1.png" class="r-plt" width="960"></p>
</div>
<div class="section level3">
<h3 id="exporting-results">9. Exporting Results<a class="anchor" aria-label="anchor" href="#exporting-results"></a>
</h3>
<p>You can easily export results to CSV for further analysis:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Export to CSV</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">$</span><span class="va">prevalence</span>, <span class="st">"prevalence_results.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">res_multi</span><span class="op">$</span><span class="va">cases</span>, <span class="st">"cases_results.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">mean_prev</span>, <span class="st">"mean_prevalence_summary.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="utility-functions">10. Utility Functions<a class="anchor" aria-label="anchor" href="#utility-functions"></a>
</h3>
<p>rminte provides several utility functions:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate net effectiveness from resistance</span></span>
<span><span class="va">dn0_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calculate_overall_dn0.html">calculate_overall_dn0</a></span><span class="op">(</span></span>
<span> resistance_level <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span> py_only <span class="op">=</span> <span class="fl">0.4</span>,</span>
<span> py_pbo <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span> py_pyrrole <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span> py_ppf <span class="op">=</span> <span class="fl">0.1</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Calculated dn0:"</span>, <span class="va">dn0_result</span><span class="op">$</span><span class="va">dn0</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Calculated dn0: 0.4193867</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Total ITN use:"</span>, <span class="va">dn0_result</span><span class="op">$</span><span class="va">itn_use</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Total ITN use: 1</span></span>
<span></span>
<span><span class="co"># Get available net types</span></span>
<span><span class="va">net_types</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/available_net_types.html">available_net_types</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Available net types:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">net_types</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Available net types: pyrethroid_only, pyrethroid_pbo, pyrethroid_ppf, pyrethroid_pyrrole</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>This vignette demonstrated how to:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Run scenarios</strong> using
<code><a href="../reference/run_minter_scenarios.html">run_minter_scenarios()</a></code> with various intervention
parameters</li>
<li>
<strong>Access results</strong> via the returned list
(<code>$prevalence</code>, <code>$cases</code>,
<code>$scenario_meta</code>)</li>
<li>
<strong>Analyze data</strong> using dplyr for grouping and
summarizing</li>
<li>
<strong>Visualize</strong> with ggplot2 or built-in plotting
functions</li>
<li>
<strong>Export</strong> results to CSV for further analysis</li>
</ol>
<p>The rminte package provides a seamless R interface to the Python
MINTe neural emulator, allowing you to rapidly evaluate malaria
intervention strategies without running full simulations.</p>
</div>
<div class="section level3">
<h3 id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.5.2 (2025-10-31)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] tidyr_1.3.1   ggplot2_4.0.1 dplyr_1.1.4   rminte_0.1.0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] Matrix_1.7-4       gtable_0.3.6       jsonlite_2.0.0     compiler_4.5.2    </span></span>
<span><span class="co">#&gt;  [5] tidyselect_1.2.1   Rcpp_1.1.0         jquerylib_0.1.4    systemfonts_1.3.1 </span></span>
<span><span class="co">#&gt;  [9] scales_1.4.0       textshaping_1.0.4  png_0.1-8          yaml_2.3.11       </span></span>
<span><span class="co">#&gt; [13] fastmap_1.2.0      here_1.0.2         reticulate_1.44.1  lattice_0.22-7    </span></span>
<span><span class="co">#&gt; [17] R6_2.6.1           labeling_0.4.3     generics_0.1.4     knitr_1.50        </span></span>
<span><span class="co">#&gt; [21] tibble_3.3.0       desc_1.4.3         rprojroot_2.1.1    RColorBrewer_1.1-3</span></span>
<span><span class="co">#&gt; [25] bslib_0.9.0        pillar_1.11.1      rlang_1.1.6        utf8_1.2.6        </span></span>
<span><span class="co">#&gt; [29] cachem_1.1.0       xfun_0.54          S7_0.2.1           fs_1.6.6          </span></span>
<span><span class="co">#&gt; [33] sass_0.4.10        viridisLite_0.4.2  cli_3.6.5          withr_3.0.2       </span></span>
<span><span class="co">#&gt; [37] pkgdown_2.2.0      magrittr_2.0.4     digest_0.6.39      grid_4.5.2        </span></span>
<span><span class="co">#&gt; [41] rappdirs_0.3.3     lifecycle_1.0.4    vctrs_0.6.5        evaluate_1.0.5    </span></span>
<span><span class="co">#&gt; [45] glue_1.8.0         farver_2.1.2       ragg_1.5.0         purrr_1.2.0       </span></span>
<span><span class="co">#&gt; [49] rmarkdown_2.30     tools_4.5.2        pkgconfig_2.0.3    htmltools_0.5.9</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by OJ Watson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
